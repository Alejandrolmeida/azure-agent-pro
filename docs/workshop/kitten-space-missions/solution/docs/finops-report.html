<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FinOps Report - Kitten Space Missions API</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #0078d4;
            --success-color: #107c10;
            --warning-color: #faa700;
            --danger-color: #d13438;
            --bg-color: #f5f5f5;
            --card-bg: #ffffff;
            --text-primary: #323130;
            --text-secondary: #605e5c;
            --border-color: #edebe9;
            --shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-primary);
            line-height: 1.6;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: var(--card-bg);
            border-radius: 8px;
            box-shadow: var(--shadow);
            overflow: hidden;
        }

        /* Header */
        .header {
            background: linear-gradient(135deg, #0078d4 0%, #005a9e 100%);
            color: white;
            padding: 40px 40px 30px;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .header .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
            margin-bottom: 20px;
        }

        .header .meta {
            display: flex;
            gap: 30px;
            flex-wrap: wrap;
            font-size: 0.95rem;
        }

        .header .meta-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* Export Button */
        .export-btn {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--card-bg);
            color: var(--primary-color);
            border: 2px solid var(--primary-color);
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            font-size: 1rem;
            box-shadow: var(--shadow);
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .export-btn:hover {
            background: var(--primary-color);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }

        /* Executive Summary */
        .executive-summary {
            padding: 40px;
            background: linear-gradient(to bottom, #ffffff 0%, #f9f9f9 100%);
        }

        .summary-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .summary-card {
            background: var(--card-bg);
            border-radius: 8px;
            padding: 25px;
            box-shadow: var(--shadow);
            border-left: 4px solid var(--primary-color);
            transition: transform 0.3s ease;
        }

        .summary-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 4px 16px rgba(0,0,0,0.15);
        }

        .summary-card.success {
            border-left-color: var(--success-color);
        }

        .summary-card.warning {
            border-left-color: var(--warning-color);
        }

        .summary-card.danger {
            border-left-color: var(--danger-color);
        }

        .summary-card .label {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .summary-card .value {
            font-size: 2.2rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 8px;
        }

        .summary-card .description {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .score-badge {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: var(--success-color);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 1rem;
        }

        /* Section */
        .section {
            padding: 40px;
            border-top: 1px solid var(--border-color);
        }

        .section-title {
            font-size: 1.8rem;
            margin-bottom: 10px;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-subtitle {
            font-size: 1rem;
            color: var(--text-secondary);
            margin-bottom: 25px;
        }

        /* Collapsible */
        .collapsible {
            background: var(--bg-color);
            border-radius: 6px;
            margin-bottom: 15px;
            overflow: hidden;
            border: 1px solid var(--border-color);
        }

        .collapsible-header {
            padding: 18px 20px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: var(--card-bg);
            transition: background 0.3s ease;
        }

        .collapsible-header:hover {
            background: var(--bg-color);
        }

        .collapsible-header h3 {
            font-size: 1.1rem;
            color: var(--text-primary);
        }

        .collapsible-icon {
            transition: transform 0.3s ease;
            font-size: 1.2rem;
            color: var(--primary-color);
        }

        .collapsible.active .collapsible-icon {
            transform: rotate(180deg);
        }

        .collapsible-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease;
            padding: 0 20px;
        }

        .collapsible.active .collapsible-content {
            max-height: 2000px;
            padding: 20px;
        }

        /* Table */
        .table-container {
            overflow-x: auto;
            margin: 20px 0;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: var(--card-bg);
            border-radius: 6px;
            overflow: hidden;
        }

        thead {
            background: linear-gradient(135deg, #0078d4 0%, #005a9e 100%);
            color: white;
        }

        th {
            padding: 15px;
            text-align: left;
            font-weight: 600;
            cursor: pointer;
            user-select: none;
            position: relative;
        }

        th:hover {
            background: rgba(255,255,255,0.1);
        }

        th::after {
            content: ' ‚áÖ';
            opacity: 0.5;
            font-size: 0.8rem;
        }

        td {
            padding: 15px;
            border-bottom: 1px solid var(--border-color);
        }

        tbody tr:hover {
            background: var(--bg-color);
        }

        tbody tr:last-child td {
            border-bottom: none;
        }

        .cost-cell {
            font-weight: 700;
            font-size: 1.1rem;
        }

        .percentage-cell {
            font-weight: 600;
        }

        /* Badges */
        .badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 0.85rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        .badge.low {
            background: #e3f2fd;
            color: #1976d2;
        }

        .badge.medium {
            background: #fff3e0;
            color: #f57c00;
        }

        .badge.high {
            background: #fce4ec;
            color: #c2185b;
        }

        .badge.optimal {
            background: #e8f5e9;
            color: #388e3c;
        }

        /* Charts */
        .chart-container {
            position: relative;
            height: 400px;
            margin: 30px 0;
            padding: 20px;
            background: var(--card-bg);
            border-radius: 8px;
            box-shadow: var(--shadow);
        }

        .chart-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: 30px;
            margin: 30px 0;
        }

        /* Risk Assessment */
        .risk-item {
            background: var(--card-bg);
            padding: 20px;
            border-radius: 6px;
            margin-bottom: 15px;
            border-left: 4px solid var(--warning-color);
            box-shadow: var(--shadow);
        }

        .risk-item h4 {
            color: var(--text-primary);
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .risk-item .impact {
            display: inline-block;
            margin-right: 15px;
            font-weight: 600;
        }

        .risk-item .cost-impact {
            color: var(--danger-color);
            font-weight: 700;
            font-size: 1.2rem;
        }

        /* Checklist */
        .checklist {
            list-style: none;
            padding: 0;
        }

        .checklist li {
            padding: 12px 0;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .checklist li:last-child {
            border-bottom: none;
        }

        .checkbox {
            width: 20px;
            height: 20px;
            border: 2px solid var(--primary-color);
            border-radius: 4px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            flex-shrink: 0;
        }

        .checkbox:hover {
            background: var(--bg-color);
        }

        .checkbox.checked {
            background: var(--success-color);
            border-color: var(--success-color);
        }

        .checkbox.checked::after {
            content: '‚úì';
            color: white;
            font-weight: bold;
        }

        /* Alternatives */
        .alternatives {
            display: grid;
            gap: 15px;
            margin-top: 15px;
        }

        .alternative {
            background: var(--bg-color);
            padding: 15px;
            border-radius: 6px;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .alternative:hover {
            border-color: var(--primary-color);
        }

        .alternative.recommended {
            border-color: var(--success-color);
            background: #f1f8f4;
        }

        .alternative .alt-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .alternative .alt-name {
            font-weight: 700;
            color: var(--text-primary);
            font-size: 1rem;
        }

        .alternative .alt-cost {
            font-weight: 700;
            color: var(--primary-color);
            font-size: 1.1rem;
        }

        .alternative .alt-specs {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 8px;
        }

        .alternative .trade-offs {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 10px;
        }

        .trade-off {
            font-size: 0.85rem;
            padding: 4px 8px;
            border-radius: 4px;
        }

        .trade-off.pro {
            background: #e8f5e9;
            color: #2e7d32;
        }

        .trade-off.con {
            background: #ffebee;
            color: #c62828;
        }

        /* Footer */
        .footer {
            background: var(--bg-color);
            padding: 30px 40px;
            text-align: center;
            color: var(--text-secondary);
            font-size: 0.9rem;
            border-top: 1px solid var(--border-color);
        }

        .footer .generated-date {
            margin-top: 10px;
            font-style: italic;
        }

        /* Progress Bar */
        .progress-bar {
            width: 100%;
            height: 8px;
            background: var(--border-color);
            border-radius: 4px;
            overflow: hidden;
            margin-top: 10px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--success-color), var(--primary-color));
            transition: width 0.5s ease;
        }

        /* Responsive */
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }

            .header {
                padding: 30px 20px;
            }

            .header h1 {
                font-size: 1.8rem;
            }

            .section {
                padding: 20px;
            }

            .summary-cards {
                grid-template-columns: 1fr;
            }

            .chart-grid {
                grid-template-columns: 1fr;
            }

            .export-btn {
                position: static;
                width: 100%;
                margin-bottom: 10px;
            }

            .table-container {
                font-size: 0.85rem;
            }

            th, td {
                padding: 10px 8px;
            }
        }

        @media print {
            .export-btn {
                display: none;
            }

            .collapsible-content {
                max-height: none !important;
            }
        }
    </style>
</head>
<body>
    <button class="export-btn" onclick="exportToPDF()">üìÑ Export to PDF</button>

    <div class="container" id="report-content">
        <!-- Header -->
        <div class="header">
            <h1>
                <span>üí∞</span>
                FinOps Analysis Report
            </h1>
            <div class="subtitle">Kitten Space Missions API - Azure Cost Optimization</div>
            <div class="meta">
                <div class="meta-item">
                    <span>üìÖ</span>
                    <span><strong>Report Date:</strong> <span id="current-date"></span></span>
                </div>
                <div class="meta-item">
                    <span>üåç</span>
                    <span><strong>Region:</strong> West Europe</span>
                </div>
                <div class="meta-item">
                    <span>üè∑Ô∏è</span>
                    <span><strong>Environment:</strong> Development</span>
                </div>
                <div class="meta-item">
                    <span>üìä</span>
                    <span><strong>Analysis Period:</strong> Monthly</span>
                </div>
            </div>
        </div>

        <!-- Executive Summary -->
        <div class="executive-summary">
            <h2 class="section-title">üìä Executive Summary</h2>
            <p class="section-subtitle">High-level overview of estimated monthly costs for the proposed architecture</p>

            <div class="summary-cards">
                <div class="summary-card success">
                    <div class="label">Total Monthly Cost</div>
                    <div class="value">$78.20</div>
                    <div class="description">Within budget target ($70-80/month)</div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 98%;"></div>
                    </div>
                </div>

                <div class="summary-card success">
                    <div class="label">Budget Status</div>
                    <div class="value">‚úì On Track</div>
                    <div class="description">$1.80 under max budget ($80/month)</div>
                </div>

                <div class="summary-card warning">
                    <div class="label">Most Expensive Resource</div>
                    <div class="value">$54.75</div>
                    <div class="description">App Service Plan B1 (70% of total)</div>
                </div>

                <div class="summary-card success">
                    <div class="label">Optimization Score</div>
                    <div class="value">
                        <span class="score-badge">
                            <span>87/100</span>
                            <span>‚≠ê</span>
                        </span>
                    </div>
                    <div class="description">Excellent cost efficiency for dev environment</div>
                </div>
            </div>

            <div class="chart-container">
                <canvas id="costDistributionChart"></canvas>
            </div>
        </div>

        <!-- Resource Breakdown -->
        <div class="section">
            <h2 class="section-title">üíµ Detailed Resource Breakdown</h2>
            <p class="section-subtitle">Comprehensive analysis of each Azure resource with costs, justifications, and alternatives</p>

            <div class="table-container">
                <table id="resourceTable">
                    <thead>
                        <tr>
                            <th onclick="sortTable(0)">Resource</th>
                            <th onclick="sortTable(1)">SKU/Tier</th>
                            <th onclick="sortTable(2)">Monthly Cost</th>
                            <th onclick="sortTable(3)">% of Total</th>
                            <th onclick="sortTable(4)">Optimization</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>App Service Plan</strong></td>
                            <td><span class="badge medium">B1 Basic</span></td>
                            <td class="cost-cell">$54.75</td>
                            <td class="percentage-cell">70.0%</td>
                            <td><span class="badge optimal">Optimal</span></td>
                        </tr>
                        <tr>
                            <td><strong>Azure SQL Database</strong></td>
                            <td><span class="badge low">Basic (5 DTU)</span></td>
                            <td class="cost-cell">$4.99</td>
                            <td class="percentage-cell">6.4%</td>
                            <td><span class="badge optimal">Optimal</span></td>
                        </tr>
                        <tr>
                            <td><strong>Private Endpoint</strong></td>
                            <td><span class="badge low">Standard</span></td>
                            <td class="cost-cell">$7.30</td>
                            <td class="percentage-cell">9.3%</td>
                            <td><span class="badge optimal">Justified</span></td>
                        </tr>
                        <tr>
                            <td><strong>Application Insights</strong></td>
                            <td><span class="badge low">Pay-as-you-go</span></td>
                            <td class="cost-cell">$4.60</td>
                            <td class="percentage-cell">5.9%</td>
                            <td><span class="badge optimal">Optimal</span></td>
                        </tr>
                        <tr>
                            <td><strong>Log Analytics Workspace</strong></td>
                            <td><span class="badge low">Pay-as-you-go</span></td>
                            <td class="cost-cell">$2.76</td>
                            <td class="percentage-cell">3.5%</td>
                            <td><span class="badge optimal">Optimal</span></td>
                        </tr>
                        <tr>
                            <td><strong>Key Vault</strong></td>
                            <td><span class="badge low">Standard</span></td>
                            <td class="cost-cell">$0.30</td>
                            <td class="percentage-cell">0.4%</td>
                            <td><span class="badge optimal">Optimal</span></td>
                        </tr>
                        <tr>
                            <td><strong>Virtual Network</strong></td>
                            <td><span class="badge low">Standard</span></td>
                            <td class="cost-cell">$0.00</td>
                            <td class="percentage-cell">0.0%</td>
                            <td><span class="badge optimal">Free</span></td>
                        </tr>
                        <tr>
                            <td><strong>Network Security Groups</strong></td>
                            <td><span class="badge low">Standard</span></td>
                            <td class="cost-cell">$0.00</td>
                            <td class="percentage-cell">0.0%</td>
                            <td><span class="badge optimal">Free</span></td>
                        </tr>
                        <tr>
                            <td><strong>Private DNS Zone</strong></td>
                            <td><span class="badge low">Standard</span></td>
                            <td class="cost-cell">$0.50</td>
                            <td class="percentage-cell">0.6%</td>
                            <td><span class="badge optimal">Minimal</span></td>
                        </tr>
                        <tr>
                            <td><strong>Data Transfer (Egress)</strong></td>
                            <td><span class="badge low">First 100GB free</span></td>
                            <td class="cost-cell">$1.50</td>
                            <td class="percentage-cell">1.9%</td>
                            <td><span class="badge optimal">Expected</span></td>
                        </tr>
                        <tr>
                            <td><strong>Storage (SQL Backups)</strong></td>
                            <td><span class="badge low">LRS</span></td>
                            <td class="cost-cell">$1.50</td>
                            <td class="percentage-cell">1.9%</td>
                            <td><span class="badge optimal">Included</span></td>
                        </tr>
                        <tr style="background: #e8f5e9; font-weight: bold;">
                            <td colspan="2"><strong>TOTAL ESTIMATED</strong></td>
                            <td class="cost-cell" style="color: var(--success-color); font-size: 1.3rem;">$78.20</td>
                            <td class="percentage-cell">100%</td>
                            <td><span class="badge optimal">‚úì Within Budget</span></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- SKU Comparison -->
        <div class="section">
            <h2 class="section-title">üîç SKU Comparison & Alternatives</h2>
            <p class="section-subtitle">Detailed comparison of pricing tiers with specifications and trade-offs</p>

            <!-- App Service Comparison -->
            <div class="collapsible active">
                <div class="collapsible-header" onclick="toggleCollapsible(this)">
                    <h3>üñ•Ô∏è App Service Plan - Tier Comparison</h3>
                    <span class="collapsible-icon">‚ñº</span>
                </div>
                <div class="collapsible-content">
                    <div class="alternatives">
                        <div class="alternative">
                            <div class="alt-header">
                                <span class="alt-name">F1 Free</span>
                                <span class="alt-cost">$0.00/month</span>
                            </div>
                            <div class="alt-specs">
                                <strong>Specs:</strong> Shared compute, 1 GB RAM, 1 GB storage, 60 CPU mins/day
                            </div>
                            <div class="trade-offs">
                                <span class="trade-off pro">‚úì Free tier</span>
                                <span class="trade-off con">‚úó No custom domains</span>
                                <span class="trade-off con">‚úó No SSL/TLS</span>
                                <span class="trade-off con">‚úó No auto-scaling</span>
                                <span class="trade-off con">‚úó Limited CPU time</span>
                                <span class="trade-off con">‚úó Always sleeps after 20 min idle</span>
                            </div>
                            <p style="margin-top: 10px; font-size: 0.9rem; color: var(--danger-color);">
                                <strong>Verdict:</strong> ‚ùå Not suitable for API development. Cold starts and CPU limits break functionality.
                            </p>
                        </div>

                        <div class="alternative recommended">
                            <div class="alt-header">
                                <span class="alt-name">B1 Basic ‚≠ê SELECTED</span>
                                <span class="alt-cost">$54.75/month</span>
                            </div>
                            <div class="alt-specs">
                                <strong>Specs:</strong> 1 core, 1.75 GB RAM, 10 GB storage, Always On, Custom domains, SSL
                            </div>
                            <div class="trade-offs">
                                <span class="trade-off pro">‚úì Always On (no cold starts)</span>
                                <span class="trade-off pro">‚úì Custom domains + SSL</span>
                                <span class="trade-off pro">‚úì Auto-scaling (1-3 instances)</span>
                                <span class="trade-off pro">‚úì Deployment slots (staging)</span>
                                <span class="trade-off pro">‚úì Best price/performance for dev</span>
                                <span class="trade-off con">‚ö†Ô∏è Limited to 1 core</span>
                            </div>
                            <p style="margin-top: 10px; font-size: 0.9rem; color: var(--success-color);">
                                <strong>Verdict:</strong> ‚úÖ <strong>Optimal choice for dev environment.</strong> Balances cost with essential features.
                            </p>
                        </div>

                        <div class="alternative">
                            <div class="alt-header">
                                <span class="alt-name">B2 Basic</span>
                                <span class="alt-cost">$109.50/month</span>
                            </div>
                            <div class="alt-specs">
                                <strong>Specs:</strong> 2 cores, 3.5 GB RAM, 10 GB storage, All B1 features
                            </div>
                            <div class="trade-offs">
                                <span class="trade-off pro">‚úì Double CPU/RAM vs B1</span>
                                <span class="trade-off pro">‚úì Better for higher load</span>
                                <span class="trade-off con">‚úó 2x cost vs B1 ($54.75 more/month)</span>
                                <span class="trade-off con">‚úó Overkill for dev environment</span>
                            </div>
                            <p style="margin-top: 10px; font-size: 0.9rem; color: var(--warning-color);">
                                <strong>Verdict:</strong> ‚ö†Ô∏è Consider for production. Too expensive for dev workload.
                            </p>
                        </div>

                        <div class="alternative">
                            <div class="alt-header">
                                <span class="alt-name">S1 Standard</span>
                                <span class="alt-cost">$69.35/month</span>
                            </div>
                            <div class="alt-specs">
                                <strong>Specs:</strong> 1 core, 1.75 GB RAM, 50 GB storage, Staging slots, Auto-scaling
                            </div>
                            <div class="trade-offs">
                                <span class="trade-off pro">‚úì 5x storage vs B1 (50 GB)</span>
                                <span class="trade-off pro">‚úì Better SLA (99.95%)</span>
                                <span class="trade-off pro">‚úì Traffic Manager integration</span>
                                <span class="trade-off con">‚úó $14.60 more than B1</span>
                                <span class="trade-off con">‚úó Similar CPU/RAM as B1</span>
                            </div>
                            <p style="margin-top: 10px; font-size: 0.9rem; color: var(--warning-color);">
                                <strong>Verdict:</strong> ‚ö†Ô∏è Minimal performance gain for dev. Save $14.60/month with B1.
                            </p>
                        </div>
                    </div>

                    <div style="margin-top: 20px; padding: 15px; background: #e3f2fd; border-left: 4px solid var(--primary-color); border-radius: 4px;">
                        <strong>üí° Recommendation:</strong> Stick with <strong>B1 Basic</strong>. Provides all essential features (Always On, SSL, auto-scaling) at optimal cost. Upgrade to S1/S2 only when production traffic requires higher SLA or storage.
                    </div>
                </div>
            </div>

            <!-- SQL Database Comparison -->
            <div class="collapsible active">
                <div class="collapsible-header" onclick="toggleCollapsible(this)">
                    <h3>üóÑÔ∏è Azure SQL Database - Tier Comparison</h3>
                    <span class="collapsible-icon">‚ñº</span>
                </div>
                <div class="collapsible-content">
                    <div class="alternatives">
                        <div class="alternative recommended">
                            <div class="alt-header">
                                <span class="alt-name">Basic (5 DTU) ‚≠ê SELECTED</span>
                                <span class="alt-cost">$4.99/month</span>
                            </div>
                            <div class="alt-specs">
                                <strong>Specs:</strong> 5 DTU, 2 GB storage, 7-day backup retention, Point-in-time restore
                            </div>
                            <div class="trade-offs">
                                <span class="trade-off pro">‚úì Lowest cost SQL option</span>
                                <span class="trade-off pro">‚úì TDE encryption included</span>
                                <span class="trade-off pro">‚úì Automatic backups</span>
                                <span class="trade-off pro">‚úì Perfect for dev/test</span>
                                <span class="trade-off con">‚ö†Ô∏è Limited to ~5 concurrent queries</span>
                                <span class="trade-off con">‚ö†Ô∏è May struggle with complex joins</span>
                            </div>
                            <p style="margin-top: 10px; font-size: 0.9rem; color: var(--success-color);">
                                <strong>Verdict:</strong> ‚úÖ <strong>Ideal for development.</strong> Sufficient for CRUD operations and small datasets. Monitor DTU usage.
                            </p>
                        </div>

                        <div class="alternative">
                            <div class="alt-header">
                                <span class="alt-name">Standard S0 (10 DTU)</span>
                                <span class="alt-cost">$15.00/month</span>
                            </div>
                            <div class="alt-specs">
                                <strong>Specs:</strong> 10 DTU, 250 GB storage, 35-day backup retention, Geo-replication
                            </div>
                            <div class="trade-offs">
                                <span class="trade-off pro">‚úì 2x performance vs Basic</span>
                                <span class="trade-off pro">‚úì 125x storage (250 GB)</span>
                                <span class="trade-off pro">‚úì Geo-replication ready</span>
                                <span class="trade-off pro">‚úì Better for production workloads</span>
                                <span class="trade-off con">‚úó 3x cost vs Basic ($10 more/month)</span>
                            </div>
                            <p style="margin-top: 10px; font-size: 0.9rem; color: var(--warning-color);">
                                <strong>Verdict:</strong> ‚ö†Ô∏è Consider if DTU usage consistently > 80% on Basic. Overkill for dev otherwise.
                            </p>
                        </div>

                        <div class="alternative">
                            <div class="alt-header">
                                <span class="alt-name">Standard S1 (20 DTU)</span>
                                <span class="alt-cost">$30.00/month</span>
                            </div>
                            <div class="alt-specs">
                                <strong>Specs:</strong> 20 DTU, 250 GB storage, 35-day backup retention, Geo-replication
                            </div>
                            <div class="trade-offs">
                                <span class="trade-off pro">‚úì 4x performance vs Basic</span>
                                <span class="trade-off pro">‚úì Handles moderate production load</span>
                                <span class="trade-off con">‚úó 6x cost vs Basic ($25 more/month)</span>
                                <span class="trade-off con">‚úó Unnecessary for dev environment</span>
                            </div>
                            <p style="margin-top: 10px; font-size: 0.9rem; color: var(--danger-color);">
                                <strong>Verdict:</strong> ‚ùå Too expensive for dev. Reserve for production with validated load requirements.
                            </p>
                        </div>

                        <div class="alternative">
                            <div class="alt-header">
                                <span class="alt-name">Serverless (0.5-4 vCores)</span>
                                <span class="alt-cost">$5-150/month (variable)</span>
                            </div>
                            <div class="alt-specs">
                                <strong>Specs:</strong> Auto-pause after 1 hour idle, Auto-scaling, Pay-per-second compute
                            </div>
                            <div class="trade-offs">
                                <span class="trade-off pro">‚úì Auto-pause saves money (off-hours)</span>
                                <span class="trade-off pro">‚úì Auto-scaling for burst workloads</span>
                                <span class="trade-off con">‚úó Cold start latency (5-10 seconds)</span>
                                <span class="trade-off con">‚úó Unpredictable costs</span>
                                <span class="trade-off con">‚úó Complexity managing auto-pause</span>
                            </div>
                            <p style="margin-top: 10px; font-size: 0.9rem; color: var(--warning-color);">
                                <strong>Verdict:</strong> ‚ö†Ô∏è Could save money if usage < 50% time. Cold starts break health checks. Avoid for continuous dev.
                            </p>
                        </div>
                    </div>

                    <div style="margin-top: 20px; padding: 15px; background: #e3f2fd; border-left: 4px solid var(--primary-color); border-radius: 4px;">
                        <strong>üí° Recommendation:</strong> <strong>Basic tier</strong> is optimal for dev. Set up Azure Monitor alert when DTU > 80% sustained. Upgrade to S0 (10 DTU) only if alert triggers consistently. Save $10/month until needed.
                    </div>
                </div>
            </div>
        </div>

        <!-- Optimization Recommendations -->
        <div class="section">
            <h2 class="section-title">‚ö° Cost Optimization Recommendations</h2>
            <p class="section-subtitle">Actionable strategies to reduce costs without compromising functionality</p>

            <div class="chart-grid">
                <div class="chart-container">
                    <canvas id="savingsChart"></canvas>
                </div>
                <div>
                    <h3 style="margin-bottom: 15px;">Immediate Actions (Save $15-20/month)</h3>
                    <div class="risk-item" style="border-left-color: var(--success-color);">
                        <h4>‚úÖ Auto-Shutdown Schedule (Saves ~$25/month)</h4>
                        <p><strong>Action:</strong> Configure App Service to auto-shutdown during off-hours (nights + weekends).</p>
                        <p><strong>Implementation:</strong> Azure Automation runbook or Logic App to stop/start on schedule.</p>
                        <p><strong>Impact:</strong> Reduce compute hours by 50% (12 hours/day usage) = <span class="cost-impact">-$27.40/month</span></p>
                        <p style="margin-top: 8px; color: var(--text-secondary);">
                            <strong>Trade-off:</strong> Manual restart required outside business hours. Acceptable for dev.
                        </p>
                    </div>

                    <div class="risk-item" style="border-left-color: var(--success-color);">
                        <h4>‚úÖ Reserved Instance (Saves ~$15/month)</h4>
                        <p><strong>Action:</strong> Purchase 1-year reserved instance for App Service Plan B1.</p>
                        <p><strong>Discount:</strong> 30% off = $54.75 ‚Üí $38.33/month</p>
                        <p><strong>Impact:</strong> <span class="cost-impact">-$16.42/month</span> (after 1-year commitment)</p>
                        <p style="margin-top: 8px; color: var(--text-secondary);">
                            <strong>Condition:</strong> Only if project runs > 6 months continuously. Otherwise, pay-as-you-go is better.
                        </p>
                    </div>

                    <div class="risk-item" style="border-left-color: var(--primary-color);">
                        <h4>üí° Log Retention Optimization (Saves ~$1.50/month)</h4>
                        <p><strong>Action:</strong> Reduce Log Analytics retention from 30 to 7 days for dev.</p>
                        <p><strong>Impact:</strong> Lower ingestion volume = <span class="cost-impact">-$1.50/month</span></p>
                        <p style="margin-top: 8px; color: var(--text-secondary);">
                            <strong>Note:</strong> 7 days sufficient for debugging recent issues. Archive older logs to cheaper storage.
                        </p>
                    </div>

                    <div class="risk-item" style="border-left-color: var(--primary-color);">
                        <h4>üí° Application Insights Sampling (Saves ~$2/month)</h4>
                        <p><strong>Action:</strong> Enable adaptive sampling at 50% in dev environment.</p>
                        <p><strong>Rationale:</strong> Full telemetry unnecessary for dev. Sample preserves error detection.</p>
                        <p><strong>Impact:</strong> <span class="cost-impact">-$2.30/month</span> (50% less ingestion)</p>
                    </div>
                </div>
            </div>

            <div style="margin-top: 30px; padding: 20px; background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%); border-radius: 8px; border-left: 4px solid var(--success-color);">
                <h3 style="color: var(--success-color); margin-bottom: 10px;">üéØ Total Potential Savings</h3>
                <div style="font-size: 2rem; font-weight: 700; color: var(--text-primary); margin-bottom: 10px;">
                    $47.62/month
                </div>
                <p style="font-size: 1rem; color: var(--text-secondary);">
                    With auto-shutdown + reserved instance: <strong>$78.20 ‚Üí $30.58/month</strong> (61% reduction)
                </p>
                <p style="margin-top: 10px; font-size: 0.9rem; color: var(--text-secondary);">
                    <strong>Note:</strong> Auto-shutdown requires manual restarts. Best for true dev-only environments with known usage patterns.
                </p>
            </div>
        </div>

        <!-- Annual Projection -->
        <div class="section">
            <h2 class="section-title">üìà Annual Cost Projection</h2>
            <p class="section-subtitle">12-month cost forecast with optimization scenarios</p>

            <div class="chart-container">
                <canvas id="annualProjectionChart"></canvas>
            </div>

            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-top: 30px;">
                <div style="background: var(--card-bg); padding: 25px; border-radius: 8px; box-shadow: var(--shadow); border-top: 4px solid var(--danger-color);">
                    <h3 style="color: var(--danger-color); margin-bottom: 15px;">Baseline (No Optimization)</h3>
                    <div style="font-size: 2.5rem; font-weight: 700; color: var(--text-primary); margin-bottom: 10px;">
                        $938.40
                    </div>
                    <p style="color: var(--text-secondary); margin-bottom: 15px;">$78.20/month √ó 12 months</p>
                    <ul style="list-style: none; padding: 0; color: var(--text-secondary); font-size: 0.9rem;">
                        <li>‚úó No auto-shutdown</li>
                        <li>‚úó No reserved instances</li>
                        <li>‚úó Full telemetry sampling</li>
                    </ul>
                </div>

                <div style="background: var(--card-bg); padding: 25px; border-radius: 8px; box-shadow: var(--shadow); border-top: 4px solid var(--warning-color);">
                    <h3 style="color: var(--warning-color); margin-bottom: 15px;">Partial Optimization</h3>
                    <div style="font-size: 2.5rem; font-weight: 700; color: var(--text-primary); margin-bottom: 10px;">
                        $741.00
                    </div>
                    <p style="color: var(--text-secondary); margin-bottom: 15px;">$61.75/month √ó 12 months</p>
                    <ul style="list-style: none; padding: 0; color: var(--text-secondary); font-size: 0.9rem;">
                        <li>‚úì Reserved instance (30% off compute)</li>
                        <li>‚úó No auto-shutdown</li>
                        <li>‚úì Sampling at 50%</li>
                    </ul>
                    <div style="margin-top: 15px; padding: 10px; background: #fff3e0; border-radius: 4px; font-size: 0.9rem; color: var(--warning-color);">
                        <strong>Savings:</strong> $197.40/year (21% reduction)
                    </div>
                </div>

                <div style="background: var(--card-bg); padding: 25px; border-radius: 8px; box-shadow: var(--shadow); border-top: 4px solid var(--success-color);">
                    <h3 style="color: var(--success-color); margin-bottom: 15px;">Full Optimization ‚≠ê</h3>
                    <div style="font-size: 2.5rem; font-weight: 700; color: var(--text-primary); margin-bottom: 10px;">
                        $366.96
                    </div>
                    <p style="color: var(--text-secondary); margin-bottom: 15px;">$30.58/month √ó 12 months</p>
                    <ul style="list-style: none; padding: 0; color: var(--text-secondary); font-size: 0.9rem;">
                        <li>‚úì Reserved instance (30% off)</li>
                        <li>‚úì Auto-shutdown (50% reduction)</li>
                        <li>‚úì Sampling + log optimization</li>
                    </ul>
                    <div style="margin-top: 15px; padding: 10px; background: #e8f5e9; border-radius: 4px; font-size: 0.9rem; color: var(--success-color);">
                        <strong>Savings:</strong> $571.44/year (61% reduction)
                    </div>
                </div>
            </div>

            <div style="margin-top: 30px; padding: 20px; background: var(--bg-color); border-radius: 8px; border-left: 4px solid var(--primary-color);">
                <h3 style="margin-bottom: 15px;">üìä Production Scaling Estimate</h3>
                <p style="margin-bottom: 15px; color: var(--text-secondary);">
                    If promoting to production with higher SLA requirements:
                </p>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                    <div>
                        <strong>App Service:</strong> B1 ‚Üí S1<br>
                        <span style="color: var(--text-secondary);">+$14.60/month</span>
                    </div>
                    <div>
                        <strong>SQL Database:</strong> Basic ‚Üí S0<br>
                        <span style="color: var(--text-secondary);">+$10.00/month</span>
                    </div>
                    <div>
                        <strong>Azure Front Door:</strong> Add WAF/CDN<br>
                        <span style="color: var(--text-secondary);">+$35.00/month</span>
                    </div>
                    <div>
                        <strong>Geo-Replication:</strong> Secondary region<br>
                        <span style="color: var(--text-secondary);">+$80.00/month</span>
                    </div>
                </div>
                <div style="margin-top: 20px; padding: 15px; background: var(--card-bg); border-radius: 6px;">
                    <strong>Estimated Production Cost:</strong> 
                    <span style="font-size: 1.5rem; color: var(--primary-color); font-weight: 700; margin-left: 10px;">
                        $218-280/month
                    </span>
                    <span style="display: block; margin-top: 5px; color: var(--text-secondary); font-size: 0.9rem;">
                        (3.5-4x increase from dev baseline)
                    </span>
                </div>
            </div>
        </div>

        <!-- Action Items Checklist -->
        <div class="section">
            <h2 class="section-title">‚úÖ Pre-Deployment Checklist</h2>
            <p class="section-subtitle">Essential cost management tasks before deploying infrastructure</p>

            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); gap: 30px;">
                <div>
                    <h3 style="margin-bottom: 20px; color: var(--primary-color);">üîß Configuration & Setup</h3>
                    <ul class="checklist">
                        <li>
                            <div class="checkbox" onclick="toggleCheckbox(this)"></div>
                            <span>Configure <strong>Budget Alert</strong> in Azure Cost Management ($100 threshold)</span>
                        </li>
                        <li>
                            <div class="checkbox" onclick="toggleCheckbox(this)"></div>
                            <span>Apply <strong>resource tags</strong>: Environment=dev, Project=KittenSpaceMissions, CostCenter=Education</span>
                        </li>
                        <li>
                            <div class="checkbox" onclick="toggleCheckbox(this)"></div>
                            <span>Set up <strong>auto-scaling rules</strong> with min=1, max=3 instances for App Service</span>
                        </li>
                        <li>
                            <div class="checkbox" onclick="toggleCheckbox(this)"></div>
                            <span>Configure <strong>Azure Advisor</strong> cost recommendations (weekly email digest)</span>
                        </li>
                        <li>
                            <div class="checkbox" onclick="toggleCheckbox(this)"></div>
                            <span>Enable <strong>cost analysis</strong> dashboard with daily refresh</span>
                        </li>
                        <li>
                            <div class="checkbox" onclick="toggleCheckbox(this)"></div>
                            <span>Verify <strong>Azure spending limit</strong> on subscription (if applicable)</span>
                        </li>
                    </ul>
                </div>

                <div>
                    <h3 style="margin-bottom: 20px; color: var(--success-color);">üìä Monitoring & Alerts</h3>
                    <ul class="checklist">
                        <li>
                            <div class="checkbox" onclick="toggleCheckbox(this)"></div>
                            <span>Create <strong>Azure Monitor alert</strong> for SQL DTU > 80% (30 min sustained)</span>
                        </li>
                        <li>
                            <div class="checkbox" onclick="toggleCheckbox(this)"></div>
                            <span>Create <strong>Azure Monitor alert</strong> for App Service CPU > 70% (30 min sustained)</span>
                        </li>
                        <li>
                            <div class="checkbox" onclick="toggleCheckbox(this)"></div>
                            <span>Set up <strong>cost anomaly detection</strong> (detects unexpected spikes)</span>
                        </li>
                        <li>
                            <div class="checkbox" onclick="toggleCheckbox(this)"></div>
                            <span>Configure <strong>SQL database storage alert</strong> at 1.6 GB (80% of 2 GB limit)</span>
                        </li>
                        <li>
                            <div class="checkbox" onclick="toggleCheckbox(this)"></div>
                            <span>Enable <strong>Application Insights adaptive sampling</strong> (50% for dev)</span>
                        </li>
                        <li>
                            <div class="checkbox" onclick="toggleCheckbox(this)"></div>
                            <span>Set <strong>Log Analytics retention</strong> to 7 days for dev environment</span>
                        </li>
                    </ul>
                </div>

                <div>
                    <h3 style="margin-bottom: 20px; color: var(--warning-color);">üîç Review & Validation</h3>
                    <ul class="checklist">
                        <li>
                            <div class="checkbox" onclick="toggleCheckbox(this)"></div>
                            <span>Review all <strong>resource SKUs</strong> match dev requirements (not over-provisioned)</span>
                        </li>
                        <li>
                            <div class="checkbox" onclick="toggleCheckbox(this)"></div>
                            <span>Confirm <strong>Private Endpoint</strong> cost ($7.30/month) is justified for dev</span>
                        </li>
                        <li>
                            <div class="checkbox" onclick="toggleCheckbox(this)"></div>
                            <span>Validate <strong>no unused resources</strong> in subscription (old test deployments)</span>
                        </li>
                        <li>
                            <div class="checkbox" onclick="toggleCheckbox(this)"></div>
                            <span>Check for <strong>Azure credits</strong> or free tier benefits (student/startup programs)</span>
                        </li>
                        <li>
                            <div class="checkbox" onclick="toggleCheckbox(this)"></div>
                            <span>Document <strong>cost escalation plan</strong> (when to upgrade SKUs)</span>
                        </li>
                        <li>
                            <div class="checkbox" onclick="toggleCheckbox(this)"></div>
                            <span>Schedule <strong>monthly cost review</strong> meeting (first Friday of month)</span>
                        </li>
                    </ul>
                </div>

                <div>
                    <h3 style="margin-bottom: 20px; color: var(--danger-color);">üõ°Ô∏è Risk Mitigation</h3>
                    <ul class="checklist">
                        <li>
                            <div class="checkbox" onclick="toggleCheckbox(this)"></div>
                            <span>Set up <strong>resource locks</strong> on critical resources (prevent accidental deletion)</span>
                        </li>
                        <li>
                            <div class="checkbox" onclick="toggleCheckbox(this)"></div>
                            <span>Configure <strong>backup retention</strong> policies (SQL: 7 days for dev)</span>
                        </li>
                        <li>
                            <div class="checkbox" onclick="toggleCheckbox(this)"></div>
                            <span>Document <strong>disaster recovery</strong> RTO/RPO targets (30 min / last backup)</span>
                        </li>
                        <li>
                            <div class="checkbox" onclick="toggleCheckbox(this)"></div>
                            <span>Create <strong>runbook for scale-up</strong> procedures (DTU upgrade, App Service tier change)</span>
                        </li>
                        <li>
                            <div class="checkbox" onclick="toggleCheckbox(this)"></div>
                            <span>Test <strong>SQL database restore</strong> from automated backup (validate RTO)</span>
                        </li>
                        <li>
                            <div class="checkbox" onclick="toggleCheckbox(this)"></div>
                            <span>Schedule <strong>load testing</strong> after initial deployment (identify bottlenecks early)</span>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="footer">
            <p><strong>Kitten Space Missions API - FinOps Report</strong></p>
            <p>Azure Architecture Pro | Cost Analysis & Optimization</p>
            <p class="generated-date">Report generated: <span id="footer-date"></span></p>
            <p style="margin-top: 15px; font-size: 0.85rem;">
                üí° <em>This report uses conservative estimates based on Azure Pricing Calculator (West Europe region). 
                Actual costs may vary ¬±5-10% based on usage patterns. Review monthly and adjust SKUs as needed.</em>
            </p>
        </div>
    </div>

    <script>
        // Set current dates
        const today = new Date().toLocaleDateString('es-ES', { 
            year: 'numeric', 
            month: 'long', 
            day: 'numeric' 
        });
        document.getElementById('current-date').textContent = today;
        document.getElementById('footer-date').textContent = today;

        // Toggle collapsible sections
        function toggleCollapsible(element) {
            const collapsible = element.parentElement;
            collapsible.classList.toggle('active');
        }

        // Toggle checkbox
        function toggleCheckbox(element) {
            element.classList.toggle('checked');
        }

        // Sort table
        let sortDirection = {};
        function sortTable(columnIndex) {
            const table = document.getElementById('resourceTable');
            const tbody = table.querySelector('tbody');
            const rows = Array.from(tbody.querySelectorAll('tr')).slice(0, -1); // Exclude total row

            sortDirection[columnIndex] = !sortDirection[columnIndex];
            const direction = sortDirection[columnIndex] ? 1 : -1;

            rows.sort((a, b) => {
                let aValue = a.cells[columnIndex].textContent.trim();
                let bValue = b.cells[columnIndex].textContent.trim();

                // Handle currency values
                if (columnIndex === 2 || columnIndex === 3) {
                    aValue = parseFloat(aValue.replace(/[$%,]/g, '')) || 0;
                    bValue = parseFloat(bValue.replace(/[$%,]/g, '')) || 0;
                }

                if (aValue < bValue) return -1 * direction;
                if (aValue > bValue) return 1 * direction;
                return 0;
            });

            // Re-append sorted rows
            rows.forEach(row => tbody.appendChild(row));
        }

        // Export to PDF
        function exportToPDF() {
            const element = document.getElementById('report-content');
            const opt = {
                margin: 0.5,
                filename: 'kitten-space-missions-finops-report.pdf',
                image: { type: 'jpeg', quality: 0.98 },
                html2canvas: { scale: 2 },
                jsPDF: { unit: 'in', format: 'a4', orientation: 'portrait' }
            };
            html2pdf().set(opt).from(element).save();
        }

        // Charts
        const chartColors = {
            blue: '#0078d4',
            green: '#107c10',
            orange: '#faa700',
            red: '#d13438',
            purple: '#5c2d91',
            teal: '#00b7c3'
        };

        // Cost Distribution Chart
        const costCtx = document.getElementById('costDistributionChart').getContext('2d');
        new Chart(costCtx, {
            type: 'doughnut',
            data: {
                labels: [
                    'App Service Plan ($54.75)',
                    'Private Endpoint ($7.30)',
                    'SQL Database ($4.99)',
                    'App Insights ($4.60)',
                    'Log Analytics ($2.76)',
                    'Data Transfer ($1.50)',
                    'Storage ($1.50)',
                    'Private DNS ($0.50)',
                    'Key Vault ($0.30)'
                ],
                datasets: [{
                    data: [54.75, 7.30, 4.99, 4.60, 2.76, 1.50, 1.50, 0.50, 0.30],
                    backgroundColor: [
                        chartColors.blue,
                        chartColors.orange,
                        chartColors.green,
                        chartColors.purple,
                        chartColors.teal,
                        '#ff6384',
                        '#36a2eb',
                        '#cc65fe',
                        '#ffce56'
                    ]
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    title: {
                        display: true,
                        text: 'Monthly Cost Distribution by Resource',
                        font: { size: 18 }
                    },
                    legend: {
                        position: 'right',
                        labels: { boxWidth: 15, padding: 10 }
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                const label = context.label || '';
                                const value = context.parsed;
                                const total = context.dataset.data.reduce((a, b) => a + b, 0);
                                const percentage = ((value / total) * 100).toFixed(1);
                                return `${label}: ${percentage}%`;
                            }
                        }
                    }
                }
            }
        });

        // Savings Chart
        const savingsCtx = document.getElementById('savingsChart').getContext('2d');
        new Chart(savingsCtx, {
            type: 'bar',
            data: {
                labels: ['Baseline', 'Auto-Shutdown', 'Reserved Instance', 'Log Optimization', 'Full Optimization'],
                datasets: [{
                    label: 'Monthly Cost ($)',
                    data: [78.20, 50.80, 61.78, 76.70, 30.58],
                    backgroundColor: [
                        chartColors.red,
                        chartColors.orange,
                        chartColors.blue,
                        chartColors.purple,
                        chartColors.green
                    ]
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    title: {
                        display: true,
                        text: 'Cost Optimization Scenarios',
                        font: { size: 18 }
                    },
                    legend: { display: false }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        ticks: {
                            callback: function(value) {
                                return '$' + value;
                            }
                        }
                    }
                }
            }
        });

        // Annual Projection Chart
        const annualCtx = document.getElementById('annualProjectionChart').getContext('2d');
        new Chart(annualCtx, {
            type: 'line',
            data: {
                labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
                datasets: [
                    {
                        label: 'Baseline (No Optimization)',
                        data: Array(12).fill(78.20),
                        borderColor: chartColors.red,
                        backgroundColor: 'rgba(209, 52, 56, 0.1)',
                        tension: 0.4
                    },
                    {
                        label: 'Partial Optimization',
                        data: Array(12).fill(61.75),
                        borderColor: chartColors.orange,
                        backgroundColor: 'rgba(250, 167, 0, 0.1)',
                        tension: 0.4
                    },
                    {
                        label: 'Full Optimization',
                        data: Array(12).fill(30.58),
                        borderColor: chartColors.green,
                        backgroundColor: 'rgba(16, 124, 16, 0.1)',
                        tension: 0.4
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    title: {
                        display: true,
                        text: '12-Month Cost Projection (Monthly Breakdown)',
                        font: { size: 18 }
                    },
                    legend: {
                        position: 'top'
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        ticks: {
                            callback: function(value) {
                                return '$' + value;
                            }
                        }
                    }
                }
            }
        });

        // Initialize all collapsibles as open
        document.addEventListener('DOMContentLoaded', function() {
            document.querySelectorAll('.collapsible').forEach(function(el) {
                el.classList.add('active');
            });
        });
    </script>
</body>
</html>
